# Test: pre_tool_use with multiple tool matcher (Read|Grep|Glob) and exit 2
# Expected: Tools blocked, stderr sent to agent
# Run: bundle exec exe/swarm run lib/swarm_sdk/examples/hooks/pre_tool_use_multi_matcher_exit_2.yml -p "Search README.md for 'swarm'"

version: 2
swarm:
  name: "pre_tool_use Multi-Matcher Exit 2"
  lead: agent

  agents:
    agent:
      description: "Test agent"
      model: gpt-5
      provider: openai
      system_prompt: "You are a test agent."
      tools:
        - Read
        - Grep
        - Glob
        - Bash  # Allow Bash as alternative

      hooks:
        pre_tool_use:
          - matcher: "Read|Grep|Glob"
            type: command
            command: "echo 'File access tools are disabled. Use Bash with cat/grep commands instead.' >&2 && exit 2"
            timeout: 5
